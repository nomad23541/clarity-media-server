<html>
    <head>
        <title><%=doc.title%> - Clarity</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/scripts_server/video.js/dist/video-js.min.css">
        <link rel="stylesheet" href="/css/videojs-skin.css">
        <script src="/scripts_server/video.js/dist/video.min.js"></script>
        <script src="/scripts_server/videojs-overlay/dist/videojs-overlay.min.js"></script>
        <script src="/scripts_server/jquery/dist/jquery.min.js"></script>

        <!--<script src="/scripts/watch.js"></script>-->
    </head>
    <body>
        <!-- <% include partials/navbar.ejs %> -->
        <div class="container-fullscreen">
            <video id="player" class="video-js vjs-default-skin" poster="<%=doc.poster%>">
            </video>
            <div class="player-overlay">
                <a id="backArrow" href="#"><i class="fas fa-chevron-left"></i></a>
                <p class="player-title"><%=doc.title%></p>
                <p class="player-year">(<%=doc.year%>)</p>
                <img src="<%=doc.poster%>">
            </div>
            
            <script>
                videojs('player', {
                    preload: 'auto',
                    controls: true,
                    autoplay: true,
                    controlBar: {
                        CurrentTimeDisplay: true,
                        TimeDivider: true,
                        DurationDisplay: true
                    }
                }).ready(function() {
                    this.src({ type: 'video/mp4', src: '/media?id=<%=doc._id%>'})

                    this.on('pause', function() {
                        $('.player-overlay').css('opacity', '1')
                        console.log('paused')
                    })

                    this.on('playing', function() {
                        $('.player-overlay').css('opacity', '0')
                        console.log('playing')
                    })

                    this.on('useractive', function() {
                        $('.player-overlay').css('opacity', '1')
                        console.log('useractive')
                    })

                    this.on('userinactive', function() {
                        $('.player-overlay').css('opacity', '0')
                        console.log('userinactive')
                    })
                })

                $(document).on('click', '#backArrow', function() {
                    window.history.go(-1)
                    console.log('test')
                    return false
                })

                $('#backArrow').click(function() {

                    console.log('test')
                })
            </script>
        </div>
    </body>
</html>